import { defineNuxtPlugin } from '@nuxtjs/composition-api';

export default defineNuxtPlugin(({ $axios }) => {
  // Route API pour gérer les fichiers déposés
  const handleFileUpload = async (files) => {
    try {
      const formData = new FormData();
      files.forEach(file => {
        formData.append('files[]', file.name);
      });

      const response = await $axios.post('/api/bdd/depot', formData);
      console.log('Réponse du serveur:', response.data);
    } catch (error) {
      console.error('Erreur lors de l\'envoi des fichiers:', error);
    }
  };

  // Exposer la fonction pour l'utiliser dans les composants
  return {
    handleFileUpload
  };
});  